<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blogg ‚Äì Ledarskap & Grupputveckling | Ignicon AB</title>
  <meta name="description" content="Insikter och praktiska r√•d om ledarskap, grupputveckling och ledningsgrupper fr√•n Ignicon AB." />
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,600;0,700;1,600&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --black: #0d0d0d; --white: #fafaf8; --accent: #c8a96e;
      --accent-dark: #a8893e; --grey: #6b6b6b; --light-grey: #f0efec; --border: #e2e0da;
    }
    html { scroll-behavior: smooth; }
    body { font-family: 'DM Sans', sans-serif; background: var(--white); color: var(--black); font-size: 16px; line-height: 1.7; }

    nav {
      position: fixed; top: 0; left: 0; right: 0; z-index: 100;
      display: flex; align-items: center; justify-content: space-between;
      padding: 1.2rem 4%; background: rgba(250,250,248,0.95);
      backdrop-filter: blur(8px); border-bottom: 1px solid var(--border);
    }
    .nav-logo { font-family: 'Playfair Display', serif; font-size: 1.3rem; font-weight: 700; color: var(--black); text-decoration: none; }
    .nav-logo span { color: var(--accent); }
    .nav-links { display: flex; gap: 2rem; list-style: none; }
    .nav-links a { text-decoration: none; font-size: 0.9rem; font-weight: 500; color: var(--black); opacity: 0.7; transition: opacity 0.2s; }
    .nav-links a:hover, .nav-links a.active { opacity: 1; }
    .nav-links a.active { border-bottom: 2px solid var(--accent); padding-bottom: 2px; }
    .nav-cta { background: var(--black); color: var(--white) !important; opacity: 1 !important; padding: 0.5rem 1.2rem; border-radius: 4px; font-weight: 500; font-size: 0.85rem !important; }
    .nav-cta:hover { background: var(--accent-dark) !important; }

    .blog-hero {
      margin-top: 70px; padding: 5rem 4% 3rem;
      background: var(--black); color: var(--white);
      position: relative; overflow: hidden;
    }
    .blog-hero::before {
      content: 'INSIKTER'; position: absolute; right: -1rem; top: 50%;
      transform: translateY(-50%); font-family: 'Playfair Display', serif;
      font-size: clamp(5rem, 12vw, 12rem); font-weight: 700;
      color: rgba(255,255,255,0.04); white-space: nowrap; pointer-events: none;
    }
    .blog-hero-inner { max-width: 700px; }
    .blog-hero-label { font-size: 0.8rem; font-weight: 500; letter-spacing: 0.15em; text-transform: uppercase; color: var(--accent); margin-bottom: 1rem; }
    .blog-hero h1 { font-family: 'Playfair Display', serif; font-size: clamp(2.2rem, 5vw, 3.5rem); font-weight: 700; line-height: 1.15; margin-bottom: 1.2rem; }
    .blog-hero h1 em { font-style: italic; color: var(--accent); }
    .blog-hero p { font-size: 1.05rem; opacity: 0.75; max-width: 500px; }

    .filter-bar { padding: 2rem 4% 1rem; display: flex; gap: 0.6rem; flex-wrap: wrap; border-bottom: 1px solid var(--border); }
    .filter-tag { display: inline-block; padding: 0.4rem 1rem; border: 1px solid var(--border); border-radius: 100px; font-size: 0.82rem; font-weight: 500; cursor: pointer; transition: all 0.2s; background: transparent; color: var(--grey); text-decoration: none; }
    .filter-tag:hover, .filter-tag.active { background: var(--black); color: var(--white); border-color: var(--black); }

    .blog-section { padding: 3rem 4% 5rem; max-width: 1200px; margin: 0 auto; }

    /* Loading */
    .loading { text-align: center; padding: 4rem; color: var(--grey); font-size: 0.95rem; }

    /* Featured */
    .featured-post { display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; margin-bottom: 4rem; padding-bottom: 4rem; border-bottom: 1px solid var(--border); align-items: center; }
    .featured-badge { display: inline-block; font-size: 0.72rem; font-weight: 500; letter-spacing: 0.12em; text-transform: uppercase; color: var(--accent-dark); margin-bottom: 0.8rem; display: block; }
    .post-category { display: inline-block; font-size: 0.75rem; font-weight: 500; letter-spacing: 0.1em; text-transform: uppercase; color: var(--grey); margin-bottom: 0.5rem; display: block; }
    .featured-post h2 { font-family: 'Playfair Display', serif; font-size: clamp(1.5rem, 2.5vw, 2rem); font-weight: 700; line-height: 1.25; margin-bottom: 1rem; }
    .featured-post h2 a { text-decoration: none; color: var(--black); transition: color 0.2s; }
    .featured-post h2 a:hover { color: var(--accent-dark); }
    .post-image-placeholder { background: linear-gradient(135deg, #f0efec 0%, #e2e0da 100%); border-radius: 4px; aspect-ratio: 4/3; display: flex; align-items: center; justify-content: center; font-size: 4rem; }
    .post-excerpt { font-size: 0.95rem; color: var(--grey); line-height: 1.7; margin-bottom: 1.5rem; }
    .post-meta { display: flex; align-items: center; gap: 1rem; font-size: 0.82rem; color: var(--grey); margin-bottom: 1.2rem; }
    .post-meta .author { font-weight: 500; color: var(--black); }
    .read-more { display: inline-flex; align-items: center; gap: 0.4rem; font-size: 0.88rem; font-weight: 500; color: var(--black); text-decoration: none; border-bottom: 1.5px solid var(--black); padding-bottom: 1px; transition: all 0.2s; }
    .read-more:hover { color: var(--accent-dark); border-color: var(--accent-dark); }
    .read-more::after { content: '‚Üí'; transition: transform 0.2s; }
    .read-more:hover::after { transform: translateX(4px); }

    /* Grid */
    .posts-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem; }
    .post-card { border: 1px solid var(--border); border-radius: 4px; overflow: hidden; transition: transform 0.25s, box-shadow 0.25s; }
    .post-card:hover { transform: translateY(-4px); box-shadow: 0 12px 40px rgba(0,0,0,0.1); }
    .card-image { background: linear-gradient(135deg, #f0efec 0%, #e8e6e0 100%); aspect-ratio: 16/9; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; }
    .card-body { padding: 1.4rem; }
    .post-card h3 { font-family: 'Playfair Display', serif; font-size: 1.15rem; font-weight: 700; line-height: 1.3; margin-bottom: 0.6rem; }
    .post-card h3 a { text-decoration: none; color: var(--black); transition: color 0.2s; }
    .post-card h3 a:hover { color: var(--accent-dark); }
    .post-card .post-excerpt { font-size: 0.88rem; margin-bottom: 1rem; }
    .post-card .post-meta { margin-bottom: 0; padding-top: 0.8rem; border-top: 1px solid var(--border); }

    /* Empty state */
    .empty-state { text-align: center; padding: 5rem 2rem; color: var(--grey); }
    .empty-state h3 { font-family: 'Playfair Display', serif; font-size: 1.4rem; color: var(--black); margin-bottom: 0.8rem; }
    .empty-state p { font-size: 0.95rem; }

    footer { background: var(--black); color: var(--white); padding: 2rem 4%; text-align: center; border-top: 1px solid rgba(255,255,255,0.08); font-size: 0.82rem; opacity: 0.6; }

    .nav-burger { display: none; flex-direction: column; gap: 5px; background: none; border: none; cursor: pointer; padding: 4px; }
    .nav-burger span { display: block; width: 22px; height: 2px; background: var(--black); border-radius: 2px; transition: all 0.3s; }
    @media (max-width: 900px) { .featured-post { grid-template-columns: 1fr; } .posts-grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 600px) {
      .posts-grid { grid-template-columns: 1fr; }
      .nav-burger { display: flex; }
      .nav-links { display: none; flex-direction: column; position: absolute; top: 100%; left: 0; right: 0; background: rgba(250,250,248,0.98); border-bottom: 1px solid var(--border); padding: 1rem 4%; gap: 0.5rem; }
      .nav-links.open { display: flex; }
      .nav-links li { list-style: none; }
    }
  </style>
</head>
<body>

<nav>
  <a href="index.html" class="nav-logo">IGNICON<span>.</span></a>
  <ul class="nav-links" id="navLinks">
    <li><a href="index.html">Hem</a></li>
    <li><a href="index.html#services">Tj√§nster</a></li>
    <li><a href="blogg.html" class="active">Blogg</a></li>
    <li><a href="index.html#about">Om oss</a></li>
    <li><a href="index.html#contact" class="nav-cta">Kontakta oss</a></li>
  </ul>
  <button class="nav-burger" id="navBurger" aria-label="√ñppna meny">
    <span></span><span></span><span></span>
  </button>
</nav>

<section class="blog-hero">
  <div class="blog-hero-inner">
    <p class="blog-hero-label">Insikter & Tankar</p>
    <h1>Ledarskap som<br><em>faktiskt fungerar</em></h1>
    <p>Praktiska insikter om ledarskap, gruppdynamik och organisationsutveckling ‚Äî direkt fr√•n f√§ltet.</p>
  </div>
</section>

<div class="filter-bar">
  <a href="#" class="filter-tag active" data-filter="alla">Alla</a>
  <a href="#" class="filter-tag" data-filter="Ledarskap">Ledarskap</a>
  <a href="#" class="filter-tag" data-filter="Grupputveckling">Grupputveckling</a>
  <a href="#" class="filter-tag" data-filter="Ledningsgrupp">Ledningsgrupp</a>
  <a href="#" class="filter-tag" data-filter="Coaching">Coaching</a>
  <a href="#" class="filter-tag" data-filter="Organisation">Organisation</a>
</div>

<main class="blog-section" id="blog-container">
  <div class="loading">Laddar inl√§gg‚Ä¶</div>
</main>

<footer>
  <p>Copyright Ignicon AB 2026. Alla r√§ttigheter f√∂rbeh√•llna.</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
// Emojis per kategori
const categoryEmoji = {
  'Ledarskap': 'üéØ',
  'Grupputveckling': 'üë•',
  'Ledningsgrupp': 'üè¢',
  'Coaching': 'üí°',
  'Organisation': 'üî•',
  'default': 'üìñ'
};

// Formattera datum till svenska
function formatDate(dateStr) {
  const months = ['jan','feb','mar','apr','maj','jun','jul','aug','sep','okt','nov','dec'];
  const d = new Date(dateStr);
  return `${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}`;
}

// Parsa frontmatter fr√•n markdown-fil
function parseFrontmatter(text) {
  const match = text.match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/);
  if (!match) return { data: {}, content: text };
  const data = {};
  match[1].split('\n').forEach(line => {
    const [key, ...val] = line.split(':');
    if (key && val.length) data[key.trim()] = val.join(':').trim().replace(/^["']|["']$/g, '');
  });
  return { data, content: match[2] };
}

// Skapa slug fr√•n filnamn
function fileToSlug(filename) {
  return filename.replace(/^\d{4}-\d{2}-\d{2}-/, '').replace(/\.md$/, '');
}

// H√§mta lista p√• alla inl√§gg fr√•n _posts
async function loadPosts() {
  try {
    // H√§mta fillistning via GitHub API (fungerar p√• Netlify med GitHub backend)
    const res = await fetch('/_posts/index.json').catch(() => null);
    
    if (res && res.ok) {
      const files = await res.json();
      return await Promise.all(files.map(f => loadPost(f)));
    }

    // Fallback: f√∂rs√∂k h√§mta en k√§nd index-fil
    const indexRes = await fetch('/_posts/posts.json').catch(() => null);
    if (indexRes && indexRes.ok) {
      const files = await indexRes.json();
      return await Promise.all(files.map(f => loadPost(f)));
    }

    return [];
  } catch(e) {
    return [];
  }
}

async function loadPost(filename) {
  const res = await fetch(`/_posts/${filename}`);
  const text = await res.text();
  const { data, content } = parseFrontmatter(text);
  return { ...data, filename, slug: fileToSlug(filename), content };
}

// Rendera inl√§gg i DOM
function renderPosts(posts) {
  const container = document.getElementById('blog-container');
  
  if (!posts.length) {
    container.innerHTML = `
      <div class="empty-state">
        <h3>Inga inl√§gg √§nnu</h3>
        <p>G√• till <strong>/admin</strong> f√∂r att skriva ditt f√∂rsta inl√§gg.</p>
      </div>`;
    return;
  }

  // Sortera nyast f√∂rst
  posts.sort((a, b) => new Date(b.date) - new Date(a.date));

  const featured = posts.find(p => p.featured === 'true') || posts[0];
  const rest = posts.filter(p => p !== featured);
  const emoji = categoryEmoji[featured.category] || categoryEmoji.default;

  let html = `
    <article class="featured-post" data-category="${featured.category || ''}">
      <div class="post-image-placeholder">${emoji}</div>
      <div>
        <span class="featured-badge">‚òÖ Senaste inl√§gg</span>
        <span class="post-category">${featured.category || 'Ledarskap'}</span>
        <h2><a href="inlagg.html?post=${featured.filename}">${featured.title}</a></h2>
        <div class="post-meta">
          <span class="author">Jens Hector</span>
          <span>¬∑</span>
          <span>${formatDate(featured.date)}</span>
          <span>¬∑</span>
          <span>${featured.readtime || '5 min l√§sning'}</span>
        </div>
        <p class="post-excerpt">${featured.excerpt || ''}</p>
        <a href="inlagg.html?post=${featured.filename}" class="read-more">L√§s inl√§gget</a>
      </div>
    </article>`;

  if (rest.length) {
    html += `<div class="posts-grid" id="posts-grid">`;
    rest.forEach(post => {
      const e = categoryEmoji[post.category] || categoryEmoji.default;
      html += `
        <article class="post-card" data-category="${post.category || ''}">
          <div class="card-image">${e}</div>
          <div class="card-body">
            <span class="post-category">${post.category || ''}</span>
            <h3><a href="inlagg.html?post=${post.filename}">${post.title}</a></h3>
            <p class="post-excerpt">${post.excerpt || ''}</p>
            <div class="post-meta">
              <span class="author">Jens Hector</span>
              <span>¬∑</span>
              <span>${formatDate(post.date)}</span>
            </div>
          </div>
        </article>`;
    });
    html += `</div>`;
  }

  container.innerHTML = html;
}

// Filter-logik
document.querySelectorAll('.filter-tag').forEach(tag => {
  tag.addEventListener('click', e => {
    e.preventDefault();
    document.querySelectorAll('.filter-tag').forEach(t => t.classList.remove('active'));
    tag.classList.add('active');
    const filter = tag.dataset.filter;
    document.querySelectorAll('[data-category]').forEach(el => {
      el.style.display = (filter === 'alla' || el.dataset.category === filter) ? '' : 'none';
    });
  });
});

// Netlify Identity
if (window.netlifyIdentity) {
  window.netlifyIdentity.on("init", user => {
    if (!user) {
      window.netlifyIdentity.on("login", () => { document.location.href = "/admin/"; });
    }
  });
}

// K√∂r
loadPosts().then(renderPosts);

// Mobilmeny
document.getElementById('navBurger').addEventListener('click', () => {
  document.getElementById('navLinks').classList.toggle('open');
});
</script>
</body>
</html>
